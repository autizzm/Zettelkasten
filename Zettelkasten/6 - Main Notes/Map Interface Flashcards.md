
Theory for the cards: [[Map Interface]]

FILE TAGS: java_core

Q: В каких реализациях Map разрешено использование null как ключ?
A: HashMap, LinkedHashMap
<!--ID: 1756828926460-->


Q: Может ли Map быть ключом внутри себя же?
A: Да
<!--ID: 1756828926471-->


Q: Может ли Map храниться как значение внутри себя же?
A: Да, может. Однако, это приведет к неопределенному поведению при вызове методов .equals() и .hashCode()
<!--ID: 1756828926479-->


Q: Что произойдет, если использовать изменяемый объект как ключ в Map? Что произойдет если изменить поле (значение) такого объекта-ключа?
A: Если значение поля этого изменяемого объекта влияет на результат применения equals() к этому объекту => возникнет неопределенное поведение
<!--ID: 1756828926488-->


Q: Как создать новый объект Map, хранящий в себе все те же пары ключ-значение уже существующего Map?
A: `new Map(existingMap);`
<!--ID: 1756828926496-->


Q: Что произойдет при вызове метода `get('a')`, когда по ключу `'a'` еще не было сохранено никаких значений?
A: он вернет null.
<!--ID: 1756828926506-->


Q: Какой метод нужно использовать, если неизвестно, имеется ли в Map определенный ключ, чтобы не проверять возвращемой значение, равно ли оно null?
A: `myMap.getOrDefault(key, defaultVal);`
<!--ID: 1756828926514-->


Q: Возвращает ли что-то метод put() класса Map?
A: Да, значение, которое до этого хранилось по этому ключу
<!--ID: 1756828926523-->


Q: Как удалять элементы из Map во время итерации по keySet?
A: ИСКЛЮЧИТЕЛЬНО с помощью итератора по keySet и его метода remove()
<!--ID: 1756828926530-->


Q: Как добавлять элементы в Map во время итерации по keySet?
A: При итерировании по keySet НЕЛЬЗЯ добавлять элементы ни в него (~~iterator.add(e)~~ ) ни в сам Map (~~map.put(k, e)~~)
<!--ID: 1756828926538-->


Q: Эффективно ли это? 
```java
for(Object o : myMap.keySet()){
	someRepetitiveTask(myMap.keySet());
}
```
A: Вполне, т.к. view-объект создается только при **первом вызове** `keySet()`. При последующих вызовах возвращается **та же ссылка** (Map хранит её в поле).
<!--ID: 1756828926546-->

Q: Можно ли создать Map на основе другой коллекции так, как это можно сделать у наследников Collection?
A: Да, у Map есть конструктор, принимающий исключительно Map:
```java
Map(Map<K,V> map);
```
<!--ID: 1756885018701-->

Q: Что делает метод Map `replace(K key, V value)`? Что призойдет если раньше значения по key не было? Что он возвращает?
A: Заменяет значение по ключу key, если оно не равно `null`, возвращает предыдущее значение или `null`, если значения по ключу key не было ( он не сохранит новое) 
<!--ID: 1756888856864-->


Q: Как удалить пару ключ-значение из Map? 
A: метод remove( K key);
<!--ID: 1756888856874-->


Q: Что возвращает метод Map `remove(K key)`?
A: значение, хранившееся по ключу key.
<!--ID: 1756888856881-->


Q: Что делает метод Map `remove(K key, V value)`? Что он возвращает?
A: Удаляет пару ключ-значение только если ключу key соответствует значение value. Возвращает true, если значение было удалено.
<!--ID: 1756888856888-->


Q: Как скопировать в существующий Map все пары ключ-значение из другого Map?
A: методом Map `putAll(Map<K,V> map` (returns void)
<!--ID: 1756888856894-->


Q: Возвращает ли что-то метод Map `putAll(Map<K,V> map)`?
A: Нет (void)
<!--ID: 1756888856902-->
