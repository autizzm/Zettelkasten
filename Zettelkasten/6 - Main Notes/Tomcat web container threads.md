
18-10-2025 19:55

Status: #baby 

Tags: [[Tomcat]]

---
# Tomcat web container threads

![[Pasted image 20251018195539.png]]


**Listener (Acceptor) thread** - Принимает HTTP запросы и распределяет (сам не парсит, просто передаёт) по Worker threads.


## Что конкретно делает Worker thread:

1. парсит HTTP запрос
2. создаёт `key:value` пары из содержимого HTTP запроса
3. передаёт эти пары в виде **HttpServletRequest** в request-handling code
4. создаёт **HttpServletResponse** и передаёт в request-handling code для заполнения
`***********************`Если на Spring`*****************************`
5. вызывается **RequestDispatcher** -> распределяет по контроллерам
![[Pasted image 20251019072052.png]]
`*************************`иначе`**********************************`
6. вызывается заданный в web.xml **HttpServlet**
`*****************************************************************`
7.  ждёт окончания выполнения кода сервлета
8. из **HttpServletResponse** извлекаются данные и формуируется HTTP отве
9. HTTP ответ отсылается пользователю

### Жизненный цикл сервлета

![[Pasted image 20251019072146.png]]

1. При старте веб-приложения Tomcat читает `web.xml` (или аннотации) и регистрирует сервлеты.
2. Контейнер загружает класс сервлета через свой `ClassLoader`.
3. Создаёт **один экземпляр** сервлета с помощью `Class.newInstance()` (или через Reflection API).
4. Вызывает `init()` один раз для инициализации.
5. При каждом запросе к этому сервлету Tomcat **не создаёт новый объект**, а вызывает метод `service()` (или  `doGet(), doPost(), ...` для [[HttpServlet - Tomcat]]) уже существующего экземпляра (в многопоточном режиме).


----
#### [[Tomcat web container threads - Flashcards|Link to flashcards]]



---
### References:

