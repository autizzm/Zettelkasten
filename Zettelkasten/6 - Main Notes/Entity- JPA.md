
27-10-2025 20:59

Status: #baby 

Tags: [[Hibernate & JPA]]

---
# @Entity annotation - JPA

Ставится над классом модели, короый является объектным представлением записи в БД (одной строки)
Каждая колонка в таблице - поле класса.

```java
@Entity(name="myEntity")
```
где name - имя отображения объекта в Context

> [!warning]
> Каждый Entity должен иметь конструктор без параметров

---
## @Table annotation

Ставится на классе.

```java
@Table(name="tableName")
```
связывает Entity с таблицей tableName

---
## @Column annotation

Связывает поле Entity с колонкой таблицы в БД:

```java
@Entity
@Table(name="Person")
class Paerson {
	...
	
	@Column(name="name")
	private String name;
	
	...
	
}
```


---
## @Id annotation

Помечает поле Entity, которое является PRIMARY KEY в таблице

```java
@Entity
@Table(name="Person")
class Paerson {
	
	@Id
	@COlumn(name="id")
	private int id
	
	...
	
}
```

---
## @GeneratedValue annotation

указывает, что значение генерируется на стороне БД

```java
@Entity  
@Table(name="Person")  
public class Person {  
  
    @Id  
    @Column(name="id")  
    @GeneratedValue(strategy=GenerationType.IDENTITY)  
    public int id;
	
	...
    
}
```

strategy - стратегия генерации этого поля в БД

здесь - strategy=GenereationType.IDENTITY, что применимо к полю, которое задано таким образом:
```sql
CREATE TABLE IF NOT EXISTS Person (  
    id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, --также применимо к SERIAL полям, т.к. это одно и то же
    ...
)
```

> [!warning] 
> Полю, которое генерируется в БД (GeneratedValue) нельзя присваивать значений. Там будет храниться значение, присваиваемое базой данных. Т.е. присваиваем для id значение по умолчанию - 0:
> ```java
> session.persist(new Person(0, "name-" + i, i, "some email"));
> ```

> [!note]
> Если хотя бы одно поле объекта генерируется с помощью БД (GenerationType.IDENTITY)
> -> при вызове persist(), объект сразу бует сохранён в БД.

##### Типы стратегий генерации:

- SEQUENCE + используем аннотацию @SequenceGenerator, где указываем нашу SEQUENCE из БД

- UUID

----
#### [[@Entity annotation - JPA - Flashcards|Link to flashcards]]



---
### References:

